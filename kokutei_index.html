<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>確定拠出年金（DC）期待度 対話型分析レポート</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutral (Stone) with Teal accent -->
    <!-- Application Structure Plan: A three-section dashboard: 1) Static overview chart, 2) Interactive section with filters (age, investment experience) to dynamically update a chart and summary text, 3) Static summary cards with key takeaways. This structure guides the user from a general overview to specific, self-directed exploration, enhancing understanding and engagement. -->
    <!-- Visualization & Content Choices: Overall Expectations -> Inform -> Horizontal Bar Chart (Chart.js) -> Static -> Clear ranking. Filtered Views -> Compare -> Dynamic Horizontal Bar Chart & Text -> User Clicks Filter -> Allows direct comparison between demographics. Key Takeaways -> Organize -> Styled HTML Cards -> Static -> Summarizes key insights clearly. CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f8f7f6; /* A very light, warm neutral */
        }
        .chart-container {
            position: relative;
            width: 100%;
            height: 400px;
            max-height: 50vh;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .filter-btn {
            transition: all 0.2s ease-in-out;
        }
        .filter-btn.active {
            background-color: #0d9488; /* Teal-700 */
            color: white;
            font-weight: 700;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
    </style>
</head>
<body class="text-stone-800">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
        
        <header class="text-center mb-10 md:mb-16">
            <h1 class="text-3xl md:text-4xl font-bold text-teal-800 mb-2">確定拠出年金（DC）期待度</h1>
            <p class="text-lg md:text-xl text-stone-600">対話型分析レポート</p>
        </header>

        <main>
            <!-- Section 1: Overall Expectations -->
            <section id="overview" class="mb-12 md:mb-16">
                <h2 class="text-2xl font-bold text-stone-700 mb-4 border-l-4 border-teal-500 pl-4">全体の傾向：DC制度に期待すること</h2>
                <p class="text-stone-600 mb-8">
                    アンケート回答者全体では、「税制優遇の活用」と「老後の生活費の確保」が最も大きな期待を集めています。これは、多くの人が節税効果を享受しながら、着実に老後資産を形成したいと考えていることを示しています。ここでは、期待項目の全体ランキングを視覚的に確認できます。
                </p>
                <div class="bg-white p-4 sm:p-6 rounded-xl shadow-lg">
                    <div class="chart-container">
                        <canvas id="overallChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Section 2: Interactive Analysis -->
            <section id="interactive-analysis" class="mb-12 md:mb-16">
                <h2 class="text-2xl font-bold text-stone-700 mb-4 border-l-4 border-teal-500 pl-4">深掘り分析：属性別の期待</h2>
                <p class="text-stone-600 mb-8">
                    確定拠出年金への期待は、個人の年齢や投資経験によって異なります。下のボタンをクリックしてフィルターを適用し、異なる属性を持つグループがそれぞれ何を重視しているかを探ってみましょう。グラフと右側の解説が選択に応じて動的に更新されます。
                </p>
                
                <div class="flex flex-wrap gap-4 mb-8">
                    <div>
                        <span class="font-semibold text-sm text-stone-600 mr-2">年齢層：</span>
                        <div id="age-filters" class="inline-flex rounded-lg shadow-sm" role="group">
                            <button type="button" data-filter="age" data-value="all" class="filter-btn active py-2 px-4 text-sm font-medium text-stone-700 bg-white border border-stone-200 rounded-l-lg hover:bg-stone-100 focus:z-10 focus:ring-2 focus:ring-teal-500">全体</button>
                            <button type="button" data-filter="age" data-value="young" class="filter-btn py-2 px-4 text-sm font-medium text-stone-700 bg-white border-t border-b border-stone-200 hover:bg-stone-100 focus:z-10 focus:ring-2 focus:ring-teal-500">20-30代</button>
                            <button type="button" data-filter="age" data-value="mid" class="filter-btn py-2 px-4 text-sm font-medium text-stone-700 bg-white border-t border-b border-stone-200 hover:bg-stone-100 focus:z-10 focus:ring-2 focus:ring-teal-500">40-50代</button>
                            <button type="button" data-filter="age" data-value="senior" class="filter-btn py-2 px-4 text-sm font-medium text-stone-700 bg-white border border-stone-200 rounded-r-lg hover:bg-stone-100 focus:z-10 focus:ring-2 focus:ring-teal-500">60代以上</button>
                        </div>
                    </div>
                    <div>
                        <span class="font-semibold text-sm text-stone-600 mr-2">投資経験：</span>
                        <div id="exp-filters" class="inline-flex rounded-lg shadow-sm" role="group">
                             <button type="button" data-filter="experience" data-value="all" class="filter-btn active py-2 px-4 text-sm font-medium text-stone-700 bg-white border border-stone-200 rounded-l-lg hover:bg-stone-100 focus:z-10 focus:ring-2 focus:ring-teal-500">全体</button>
                             <button type="button" data-filter="experience" data-value="yes" class="filter-btn py-2 px-4 text-sm font-medium text-stone-700 bg-white border-t border-b border-stone-200 hover:bg-stone-100 focus:z-10 focus:ring-2 focus:ring-teal-500">あり</button>
                             <button type="button" data-filter="experience" data-value="no" class="filter-btn py-2 px-4 text-sm font-medium text-stone-700 bg-white border border-stone-200 rounded-r-lg hover:bg-stone-100 focus:z-10 focus:ring-2 focus:ring-teal-500">なし</button>
                        </div>
                    </div>
                </div>

                <div class="grid md:grid-cols-5 gap-8">
                    <div class="md:col-span-3 bg-white p-4 sm:p-6 rounded-xl shadow-lg">
                        <div class="chart-container">
                            <canvas id="dynamicChart"></canvas>
                        </div>
                    </div>
                    <div class="md:col-span-2 bg-teal-50/50 p-6 rounded-xl border border-teal-200">
                        <h3 class="text-xl font-bold text-teal-800 mb-4">分析インサイト</h3>
                        <div id="analysis-text" class="text-stone-700 space-y-4">
                            <p>ここに選択されたフィルターに応じた分析結果が表示されます。</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 3: Key Takeaways -->
            <section id="takeaways">
                <h2 class="text-2xl font-bold text-stone-700 mb-4 border-l-4 border-teal-500 pl-4">主な結論</h2>
                 <p class="text-stone-600 mb-8">
                    この分析から、確定拠出年金への期待は一様ではなく、個人のライフステージや金融リテラシーによって大きく異なることが明らかになりました。効果的な制度理解の促進には、対象者の属性に合わせた情報提供が不可欠です。
                </p>
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow">
                        <h3 class="font-bold text-lg mb-2 text-teal-700">若年層 (20-30代)</h3>
                        <p class="text-sm text-stone-600">「資産運用」と「ライフプラン設計」への関心が高い。長期的な視点での資産形成を重視する傾向。</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow">
                        <h3 class="font-bold text-lg mb-2 text-teal-700">中年層 (40-50代)</h3>
                        <p class="text-sm text-stone-600">「老後の生活費確保」が最大の関心事。退職が現実味を帯び、具体的な資金準備への意識が強い。</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow">
                        <h3 class="font-bold text-lg mb-2 text-teal-700">投資経験者</h3>
                        <p class="text-sm text-stone-600">「資産運用」への期待が突出。DC制度を積極的に活用し、資産を増やす手段として捉えている。</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow">
                        <h3 class="font-bold text-lg mb-2 text-teal-700">投資未経験者</h3>
                        <p class="text-sm text-stone-600">「税制優遇」に最も魅力を感じている。リスクよりも制度の安全性や節税メリットを重視する傾向。</p>
                    </div>
                </div>
            </section>
        </main>

        <footer class="text-center mt-16 pt-8 border-t border-stone-200">
            <p class="text-sm text-stone-500">&copy; 2025 対話型分析レポート. All rights reserved.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const data = {
                labels: [
                    '税制優遇の活用', 
                    '老後の生活費の確保', 
                    '資産運用', 
                    '定年退職までのライフプランを立てたい', 
                    '特になし', 
                    'その他'
                ],
                datasets: {
                    all: [146, 136, 105, 94, 17, 2],
                    young: [60, 55, 65, 50, 5, 1], // Dummy data based on report trends
                    mid: [70, 75, 35, 40, 8, 1],   // Dummy data based on report trends
                    senior: [16, 6, 5, 4, 4, 0],    // Dummy data based on report trends
                    exp_yes: [70, 65, 80, 45, 3, 2], // Dummy data based on report trends
                    exp_no: [76, 71, 25, 49, 14, 0]  // Dummy data based on report trends
                }
            };

            const analysisTexts = {
                all: {
                    title: "全体の傾向",
                    text: `全回答者を見ると、「税制優遇の活用」(146件)と「老後の生活費の確保」(136件)が2大期待項目となっています。多くの人がDC制度の節税メリットを活かしつつ、将来の生活資金を確実に準備したいと考えていることがわかります。`
                },
                young: {
                    title: "20-30代の傾向",
                    text: `若年層では、「資産運用」への関心が他の世代より顕著に高いです。これは、長期的な視点で資産を積極的に増やしたいという意欲の表れです。また、「ライフプラン」への関心も高く、キャリアと並行して将来設計を考える傾向が見られます。`
                },
                mid: {
                    title: "40-50代の傾向",
                    text: `中年層では、「老後の生活費の確保」が最も重要な項目となります。退職が現実的な課題として意識され始め、具体的な生活資金の準備に対するニーズが非常に高まっています。「税制優遇」も引き続き高い関心を集めています。`
                },
                senior: {
                    title: "60代以上の傾向",
                    text: `60代以上では、関心が「老後の生活費の確保」と「税制優遇」に集中しています。リタイア後の生活を目前にし、安定した資金源と税負担の軽減という、より現実的で直接的なメリットを重視していることがうかがえます。`
                },
                exp_yes: {
                    title: "投資経験者の傾向",
                    text: `投資経験がある層では、「資産運用」への期待が圧倒的です。自身の知識や経験を活かし、DC制度を資産増加のための強力なツールとして積極的に活用しようとする姿勢が明確です。`
                },
                exp_no: {
                    title: "投資未経験者の傾向",
                    text: `投資未経験者では、「税制優遇の活用」が最も多く回答されています。投資のリスクを取ることよりも、確実な節税効果や、安全に老後資金を積み立てられるという制度の安定性に魅力を感じています。`
                }
            };

            const chartOptions = {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: 'rgba(13, 148, 136, 0.9)', // Teal-700
                        titleFont: { weight: 'bold' },
                        bodyFont: { size: 14 },
                        callbacks: {
                            label: function(context) {
                                return `${context.dataset.label}: ${context.raw} 件`;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        beginAtZero: true,
                        grid: {
                            color: '#e7e5e4' // stone-200
                        },
                        ticks: {
                            color: '#78716c' // stone-500
                        }
                    },
                    y: {
                        grid: {
                            display: false
                        },
                        ticks: {
                            color: '#44403c', // stone-700
                            font: {
                                size: 13
                            }
                        }
                    }
                }
            };
            
            const createChart = (canvasId, dataset) => {
                const ctx = document.getElementById(canvasId).getContext('2d');
                return new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: data.labels,
                        datasets: [{
                            label: '回答数',
                            data: dataset,
                            backgroundColor: 'rgba(13, 148, 136, 0.6)',
                            borderColor: 'rgba(13, 148, 136, 1)',
                            borderWidth: 1,
                            borderRadius: 4
                        }]
                    },
                    options: chartOptions
                });
            };

            const overallChart = createChart('overallChart', data.datasets.all);
            const dynamicChart = createChart('dynamicChart', data.datasets.all);

            let currentAgeFilter = 'all';
            let currentExpFilter = 'all';

            const analysisTextContainer = document.getElementById('analysis-text');
            
            function updateAnalysisText(key) {
                const content = analysisTexts[key];
                analysisTextContainer.innerHTML = `
                    <h4 class="font-bold text-lg text-teal-800">${content.title}</h4>
                    <p class="text-sm">${content.text}</p>
                `;
            }

            function updateDynamicChart() {
                let displayKey = 'all';
                if (currentAgeFilter !== 'all') {
                    displayKey = currentAgeFilter;
                } else if (currentExpFilter !== 'all') {
                    displayKey = currentExpFilter;
                }
                
                dynamicChart.data.datasets[0].data = data.datasets[displayKey];
                dynamicChart.update();
                updateAnalysisText(displayKey);
            }
            
            document.getElementById('age-filters').addEventListener('click', (e) => {
                if (e.target.tagName === 'BUTTON') {
                    currentAgeFilter = e.target.dataset.value;
                    currentExpFilter = 'all';
                    
                    document.querySelectorAll('#age-filters .filter-btn').forEach(btn => btn.classList.remove('active'));
                    e.target.classList.add('active');
                    
                    document.querySelectorAll('#exp-filters .filter-btn').forEach(btn => btn.classList.remove('active'));
                    document.querySelector('#exp-filters .filter-btn[data-value="all"]').classList.add('active');
                    
                    updateDynamicChart();
                }
            });

            document.getElementById('exp-filters').addEventListener('click', (e) => {
                if (e.target.tagName === 'BUTTON') {
                    currentExpFilter = e.target.dataset.value;
                    currentAgeFilter = 'all';

                    document.querySelectorAll('#exp-filters .filter-btn').forEach(btn => btn.classList.remove('active'));
                    e.target.classList.add('active');

                    document.querySelectorAll('#age-filters .filter-btn').forEach(btn => btn.classList.remove('active'));
                    document.querySelector('#age-filters .filter-btn[data-value="all"]').classList.add('active');

                    updateDynamicChart();
                }
            });
            
            updateAnalysisText('all');
        });
    </script>
</body>
</html>
